var validEmail=/^[a-z0-9.-_]*[@]+[a-z]+[0-9-_]*[.]+[a-z.-_]+/,validString=/^[a-zA-Z]+[ á-úÁ-Úä-üÄ-Üà-ùÀ-ÙñÑ]*/,validInteger=/^[0-9]+$/,createFunctions={newResearcher:function(){jQuery("#new-researcher").css("display","block")},newParticipant:function(){jQuery("#new-participant").css("display","block")}},saveResearcher=function(){var a=jQuery("#new-researcher-id").val(),r=jQuery("#new-researcher-name").val(),n=jQuery("#new-researcher-email").val(),t=jQuery("#new-researcher-faculty").val();jQuery("#new-researcher-id").removeClass("is-invalid"),jQuery("#new-researcher-name").removeClass("is-invalid"),jQuery("#new-researcher-email").removeClass("is-invalid"),validInteger.test(a)&&validEmail.test(n)&&validString.test(r)?jQuery.ajax({type:"GET",url:url,data:{string:a},success:function(e){if(e.exists)jQuery("#new-researcher-id").addClass("is-invalid"),jQuery("#check-researcher-id-exists").css("display","block"),jQuery("#check-researcher-id-input").css("display","none");else{var i=jQuery('<button class="btn btn-primary rpm-badge" type="button"><span>'+r+'</span><input type="hidden" name="new_researcher_id[]" value="'+a+'"><input type="hidden" name="new_researcher_name[]" value="'+r+'"><input type="hidden" name="new_researcher_email[]" value="'+n+'"><input type="hidden" name="new_researcher_faculty[]" value="'+t+'"></button>');jQuery("#researchers-cloud").append(i),i.bind("click",removeNewCloudElement),jQuery("#new-researcher-id").val(""),jQuery("#new-researcher-name").val(""),jQuery("#new-researcher-email").val(""),jQuery("#new-researcher").css("display","none")}},error:function(e){jQuery("#new-researcher-id").addClass("is-invalid"),jQuery("#check-researcher-id-exists").css("display","block"),jQuery("#check-researcher-id-input").css("display","none")},dataType:"json"}):(validInteger.test(a)||(jQuery("#new-researcher-id").addClass("is-invalid"),jQuery("#check-researcher-id-input").css("display","block"),jQuery("#check-researcher-id-exists").css("display","none")),validEmail.test(n)||jQuery("#new-researcher-email").addClass("is-invalid"),validString.test(r)||jQuery("#new-researcher-name").addClass("is-invalid"))},saveParticipant=function(){var a=jQuery("#new-participant-id").val(),r=jQuery("#new-participant-name").val(),n=jQuery("#new-participant-degree").val();jQuery("#new-participant-id").removeClass("is-invalid"),jQuery("#new-participant-name").removeClass("is-invalid"),validInteger.test(a)||validString.test(r)?jQuery.ajax({type:"GET",url:url,data:{string:a},success:function(e){if(e.exists)jQuery("#new-participant-id").addClass("is-invalid"),jQuery("#check-participant-id-exists").css("display","block"),jQuery("#check-participant-id-input").css("display","none");else{var i=jQuery('<button class="btn btn-primary rpm-badge" type="button"><span>'+r+'</span><input type="hidden" name="new_participant_id[]" value="'+a+'"><input type="hidden" name="new_participant_name[]" value="'+r+'"><input type="hidden" name="new_participant_degree[]" value="'+n+'"></button>');jQuery("#participants-cloud").append(i),i.bind("click",removeNewCloudElement),jQuery("#new-participant-id").val(""),jQuery("#new-participant-name").val(""),jQuery("#new-participant").css("display","none")}},error:function(e){jQuery("#new-participant-id").addClass("is-invalid"),jQuery("#check-participant-id-exists").css("display","block"),jQuery("#check-participant-id-input").css("display","none")},dataType:"json"}):(validInteger.test(a)||(jQuery("#new-participant-id").addClass("is-invalid"),jQuery("#check-participant-id-input").css("display","block"),jQuery("#check-participant-id-exists").css("display","none")),validString.test(r)||jQuery("#new-participant-name").addClass("is-invalid"))};jQuery(".rpm-api-search-slug").on("input",function(){var a=jQuery(this),r=jQuery("#"+a.attr("rpm-api-input")),n=jQuery("#"+a.attr("rpm-api-list")),t=a.attr("rpm-api-result-id"),s=a.attr("rpm-api-result-human");n.children().unbind(),n.html(""),jQuery.ajax({type:"GET",url:jQuery(this).attr("rpm-api"),data:{string:jQuery(this).val()},success:function(e){n.css("display","block"),e.forEach(function(e){var i=jQuery("<li>"+e[s]+"</li>");n.append(i),i.bind("click",function(){a.val(e[s]),r.val(e[t]),n.css("display","none")})})},dataType:"json"})});var removeCloudElement=function(){var e=jQuery(this);e.parent().append(jQuery('<input type="hidden" name="'+e.attr("rpm-delete")+'" value="'+e.attr("rpm-input")+'" >')),e.remove(),jQuery("#"+e.attr("rpm-input")).remove()},removeNewCloudElement=function(){jQuery(this).remove()};jQuery(".rpm-api-search-slug-cloud").on("input",function(){var n=jQuery(this),t=jQuery("#"+n.attr("rpm-api-list")),s=n.attr("rpm-api-result-id"),l=n.attr("rpm-api-result-human"),c=jQuery("#"+n.attr("rpm-api-cloud"));t.children().unbind(),t.html("");var p=jQuery(this).val(),a="";jQuery("input[name='"+n.attr("rpm-api-input")+"[]']").each(function(e,i){a+=i.value+","}),jQuery.ajax({type:"GET",url:jQuery(this).attr("rpm-api"),data:{string:p,current:a},success:function(e){if(t.css("display","block"),e.length<=0)if(void 0===n.attr("rpm-api-create")||!1===n.attr("rpm-api-create")){var i=jQuery("<li>No se han encontrado coincidencias, click para finalizar búsqueda.</li>");t.append(i),i.bind("click",function(){t.css("display","none"),n.val("")})}else{var a=slugify(p),r=!1;if(jQuery("input[name='"+n.attr("rpm-api-input")+"[]']").each(function(e,i){r||i.value!==a||(r=!0)}),r){i=jQuery("<li>Registro pre-existente, click para finalizar búsqueda.</li>");t.append(i),i.bind("click",function(){t.css("display","none"),n.val("")})}else{i=jQuery("<li>Click para agregar nuevo registro, <b>"+n.val()+"</b></li>");t.append(i),void 0===n.attr("rpm-api-create-function")?i.bind("click",function(){t.css("display","none");var e=jQuery('<button class="btn btn-primary rpm-badge" type="button"><span>'+n.val()+'</span><input type="hidden" name="'+n.attr("rpm-api-create-input")+'[]" value="'+n.val()+'"></button>');c.append(e),e.bind("click",removeNewCloudElement),n.val("")}):i.bind("click",createFunctions[n.attr("rpm-api-create-function")])}}else e.forEach(function(a){var e=jQuery("<li>"+a[l]+"</li>");t.append(e),e.bind("click",function(){t.css("display","none"),n.val("");var e=jQuery('<button class="btn btn-primary rpm-badge" type="button" rpm-input="'+a[s]+'" rpm-delete="'+n.attr("rpm-api-input")+'_delete[]"><span>'+a[l]+"</span></button>"),i=jQuery('<input type="hidden" name="'+n.attr("rpm-api-input")+'[]" id="'+a[s]+'" value="'+a[s]+'">');c.append(e),c.append(i),e.bind("click",removeCloudElement)})})},error:function(e){console.error(e)},dataType:"json"})}),jQuery(".rpm-api-cloud").children(".rpm-badge").bind("click",removeCloudElement);var removeListElement=function(){var e=jQuery(this).parents(".rpm-dynamic-list-item");e.css("display","none"),e.children(".delete").val(1)},addListElement=function(){var e=jQuery(this).parents(".rpm-dynamic-list-item"),i=e.parent(),a=e.clone(!0);a.find("input[type=text]").val(""),a.find("input[type=radio]").prop("checked",!1),a.find("input[type=checkbox]").prop("checked",!1),a.find("textarea").val(""),a.find(".delete").val(-1),a.find(".id").val(-1),a.find(".rpm-citation-link").css("display","none"),a.find(".rpm-citation-file").css("display","none"),i.append(a),jQuery(this).unbind(),jQuery(this).val("-"),jQuery(this).bind("click",removeListElement)};jQuery(".plus").bind("click",addListElement),jQuery(".minus").bind("click",removeListElement),jQuery(".single-file").change(function(){if(this.files&&this.files[0]){var e=new FileReader,i=jQuery(this).parent().find(".thumb"),a=jQuery(this).parent().find(".thumb-featured-image");e.onload=function(e){i.css("background","url("+e.target.result+")"),a.attr("src",e.target.result)},e.readAsDataURL(this.files[0])}});var addFile=function(){if(this.files&&this.files[0]){var e=new FileReader,i=jQuery(this).attr("rpm-prefix"),a=jQuery(this).parents(".rpm-multi-file-container").find(".multi-file-gallery"),r=jQuery('<input type="file" class="form-control-file multi-file" name="gallery[]" ariadescribedby="gallery-help" rpm-prefix="gallery" multiple>');r.change(addFile),jQuery(this).parent().append(r),jQuery(this).css("display","none"),e.onload=function(e){a.append('<div class="col-3 rpm-multi-file-thumb"><div class="rpm-multi-file-thumb-delete">X</div><img src="'+e.target.result+'"><input type="hidden" class="delete" name="'+i+'_delete[]" value="-1"></div>'),jQuery(".rpm-multi-file-thumb-delete").click(removeFile)},e.readAsDataURL(this.files[0])}},removeFile=function(){jQuery(this).parent().css("display","none"),jQuery(this).parent().find(".delete").val(1)};jQuery(".multi-file").change(addFile),jQuery(".rpm-multi-file-thumb-delete").click(removeFile);var linkOrFile=function(){var e=jQuery(this),i=e.parents(".rpm-dynamic-list-item");switch(e.val()){case"link":i.find(".rpm-citation-link").css("display","inline-block"),i.find(".rpm-citation-file").css("display","none"),console.log("hidde file");break;case"file":i.find(".rpm-citation-file").css("display","inline-block"),i.find(".rpm-citation-link").css("display","none"),console.log("hidde link")}};jQuery('select[name="citation_type[]"]').change(linkOrFile);
//# sourceMappingURL=admin.js.map
